<!DOCTYPE html>
<html>
<head>
    <title>Arma3 - Adler-AAR</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
    <style>
        #map {
            min-height: 400px;
            min-width: 400px;
            background-color: pink;
        }
    </style>
</head>
<body>
<div id="map">
    <div id="nojs">
        If you can see this message, there is a problem with JavaScript
    </div>
</div>
<script>

    var armaMapType = new google.maps.ImageMapType({
                getTileUrl: function (coord, zoom) {

                    window.coord = coord;
                    var numTiles = Math.pow(2, zoom);

                    if (coord.y < 0 || coord.y >= numTiles) {
                        return null;
                    }
                    if (coord.x < 0 || coord.x >= numTiles) {
                        return null;
                    }

                    var myY = Math.pow(2, zoom) - (coord.y + 1);

                    var baseURL = 'stratis_18022/';
                    baseURL += [zoom, coord.x, myY].join('/') + '.png';
                    return baseURL;
                },
                tileSize: new google.maps.Size(256, 256),
                isPng: true,
                minZoom: 0,
                maxZoom: 7,
                name: 'Stratis T10'
            }
    );

    function init() {

        window.map = new google.maps.Map(
                document.querySelector('#map'),
                {
                    zoom: 0,
                    center: new google.maps.LatLng(0, 0),
                    mapTypeControlOptions: {
                        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'armaMapType']
                    }

                }
        );

        map.mapTypes.set('map', armaMapType);
        map.setMapTypeId('map');


    }
    google.maps.event.addDomListener(window, 'load', init);

    /**
     * in-game coordinates are in meters, with 0,0 at south west corner of map
     * @param x
     * @param y
     * @param z
     *
     * For simplicity's sake, I will translate
     *
     */
    function gameCoordsToLatLng(x, y, z) {
        return new google.maps.LatLng(x / 1000, y / 1000);
    }

    function latLngToGameCoords(latLng) {
        return {
            x: latLng.lat() * 1000,
            y: latLng.lng() * 1000,
            z: 0
        };
    }

</script>
</body>
</html>